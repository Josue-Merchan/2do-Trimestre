#include <WiFi.h>
#include <ThingerESP32.h>
#include <DHT.h>

/* ========= THINGER.IO ========= */
#define USERNAME "josue_merchan"
#define DEVICE_ID "esp32sensor"
#define DEVICE_CREDENTIAL "1234567"

/* ========= WIFI ========= */
#define SSID "MECATRONICA_3ABC"
#define SSID_PASSWORD "MEC2025@."

/* ========= DHT11 ========= */
#define DHTPIN 15
#define DHTTYPE DHT11

DHT dht(DHTPIN, DHTTYPE);
ThingerESP32 thing(USERNAME, DEVICE_ID, DEVICE_CREDENTIAL);

void setup() {
  Serial.begin(115200);
  delay(2000);

  thing.add_wifi(SSID, SSID_PASSWORD);
  dht.begin();

  // Recursos visibles en Thinger.io
  thing["Temperatura"] >> outputValue(dht.readTemperature());
  thing["Humedad"] >> outputValue(dht.readHumidity());

  Serial.println("ESP32 listo para Thinger.io");
}

void loop() {
  thing.handle();
}
